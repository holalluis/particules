<!doctype html><html><head>
  <meta charset="utf8">
  <title>Partícules</title>
  <style>
    canvas{
      display:block;
      background:#888;
    }
    input[type=number]{
      width:50px;
    }
  </style>
</head>
<body onkeypress="teclat(event)">

<canvas></canvas>
<script>
  //canvas i context
  let canvas=document.querySelector('canvas');
  let ctx=canvas.getContext('2d');

  //dimensions canvas
  canvas.width=window.innerWidth-100; //px
  canvas.height=600; //px
</script>

<!--controls-->
<main style="padding:5px">
  <div>
    <big><b>Simulador de partícules</b></big>
    <button onclick=play^=1>play/pausa</button>
  </div>

  <!--controls camera i frustum-->
  <div>
    <table border=1>
      <tr>
        <td colspan=3 rowspan=4>ull càmera
        <td>x <input type=number id=camera_ull_x onchange="camera.ull.x=this.value;update_matrius()" value=0 step=0.5></tr>
        <td>y <input type=number id=camera_ull_y onchange="camera.ull.y=this.value;update_matrius()" value=0 step=0.5></tr>
        <td>z <input type=number id=camera_ull_z onchange="camera.ull.z=this.value;update_matrius()" value=0 step=0.5></tr>
      </tr>
      <tr><td>
        <table>
          <tr><td>u1
            <input type=number id=camera_u1_x onchange="camera.u1[0]=this.value;update_matrius()" value=0 step=0.01>
            <input type=number id=camera_u1_y onchange="camera.u1[1]=this.value;update_matrius()" value=0 step=0.01>
            <input type=number id=camera_u1_z onchange="camera.u1[2]=this.value;update_matrius()" value=0 step=0.01>
          </tr>
          <tr><td>u2
            <input type=number id=camera_u2_x onchange="camera.u2[0]=this.value;update_matrius()" value=0 step=0.01>
            <input type=number id=camera_u2_y onchange="camera.u2[1]=this.value;update_matrius()" value=0 step=0.01>
            <input type=number id=camera_u2_z onchange="camera.u2[2]=this.value;update_matrius()" value=0 step=0.01>
          </tr>
          <tr><td>u3
            <input type=number id=camera_u3_x onchange="camera.u3[0]=this.value;update_matrius()" value=0 step=0.01>
            <input type=number id=camera_u3_y onchange="camera.u3[1]=this.value;update_matrius()" value=0 step=0.01>
            <input type=number id=camera_u3_z onchange="camera.u3[2]=this.value;update_matrius()" value=0 step=0.01>
          </tr>
        </table>
      </tr>
    </table>
    <!--frustum-->
    <table border=1><tr>
      <td rowspan=4 style="text-align:center">frustum
      <td>angle1<td><input type=number id=frustum_angle1 onchange="frustum.angle1=this.value;update_matrius()" value=0 step=0.0001></tr>
      <td>angle2<td><input type=number id=frustum_angle2 onchange="frustum.angle2=this.value;update_matrius()" value=0 step=0.0001></tr>
      <td>near <td><input type=number id=frustum_near  onchange="frustum.near=this.value;update_matrius()"  value=0></tr>
      <td>far  <td><input type=number id=frustum_far   onchange="frustum.far=this.value;update_matrius()"   value=0></tr>
    </table>
  </div>

  <!--log-->
  <div>
    <b>Info simulació</b>
    <table border=1>
      <tr><td>Energia cinètica total <td id=Ec_total>0<td>J
      <tr><td>Velocitat màxima       <td id=v_max   >0<td>m/s
    </table>
    <script>
      let dom={
        Ec_total: document.querySelector('#Ec_total'),
        v_max:    document.querySelector('#v_max'),
      };
    </script>
  </div>
</main>

<!--carrega model-->
<script src="vector.js"></script>          <!--classe Vector-->
<script src="particula.js"></script>       <!--classe Particula-->
<script src="tipus_particules.js"></script><!--classes per tipus de partícules-->
<script src="constants.js"></script>       <!--constants universals-->
<script src="utils.js" ></script>          <!--utilitats-->
<script src="escena.js"></script>          <!--defineix una escena i els paràmetres de simulació-->
<script src="camera.js"></script>          <!--càmera-->
<script src="render.js"></script>          <!--loop requestAnimationFrame-->
<script src="teclat.js"></script>          <!--teclat-->
<script src="mouse.js"></script>           <!--mouse-->
